<main class="relative min-w-0 flex-1 py-8 lg:px-12 break-anywhere page-api-block:xl:max-2xl:pr-0 page-api-block:mx-auto page-api-block:max-w-screen-2xl page-default-width page-has-toc"><div class="grid [&amp;&gt;*+*]:mt-5 whitespace-pre-wrap"><p class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0">To execute your script move the <code class="py-[1px] px-1.5 min-w-[1.625rem] justify-center items-center ring-1 ring-inset ring-tint bg-tint rounded text-[.875em] leading-[calc(max(1.20em,1.25rem))]">.lua</code> file into the <code class="py-[1px] px-1.5 min-w-[1.625rem] justify-center items-center ring-1 ring-inset ring-tint bg-tint rounded text-[.875em] leading-[calc(max(1.20em,1.25rem))]">%cheat_dir%/scripts</code> folder.</p><hr class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 border-tint-subtle"/><h2 class="text-3xl font-semibold heading grid scroll-m-12 relative group/hash mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0" id="callbacks"><div class="relative hash grid grid-area-1-1 h-[1em] border-0 opacity-0 group-hover/hash:opacity-[0] group-focus/hash:opacity-[0] md:group-hover/hash:md:opacity-[1] md:group-focus/hash:md:opacity-[1] -ml-6 mt-[1.05em]"><a aria-label="Direct link to heading" class="inline-flex h-full items-start leading-tight" href="#callbacks"><svg class="gb-icon self-center transition-colors text-transparent group-hover/hash:text-tint-subtle contrast-more:group-hover/hash:text-tint-strong size-4" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></div><div class="grid-area-1-1 z-[1] justify-self-start text-left leading-tight mt-[1em]">Callbacks</div></h2><p class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0">Most of your code will be executed inside the callbacks. To register the callback function, your script should return a table in the following format:</p><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R1cd9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">return {
</span></span><span class="highlight-line"><span class="highlight-line-content">    CallbackName = FuncHandler,
</span></span><span class="highlight-line"><span class="highlight-line-content">}</span></span></code></pre></div><details class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 group/expandable bg-tint-base border border-b-0 border-tint-subtle [&amp;]:mt-[0px] [&amp;:first-child]:mt-5 [&amp;:first-child]:rounded-t-lg [:not(&amp;)_+&amp;]:mt-5 [:not(&amp;)_+&amp;]:rounded-t-lg [&amp;:not(:has(+_&amp;))]:mb-5 [&amp;:not(:has(+_&amp;))]:rounded-b-lg [&amp;:not(:has(+_&amp;))]:border-b" id="example" open=""><summary class="cursor-pointer px-4 pr-10 py-4 relative list-none select-none transition-colors text-tint group-hover/expandable:text-tint-strong group-open/expandable:text-tint-strong [&amp;::-webkit-details-marker]:hidden"><svg class="gb-icon inline-block size-3 mr-2 mb-1 transition-transform shrink-0 group-open/expandable:rotate-90" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/chevron-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg>Example<a aria-label="Direct link to heading" class="absolute top-2 bottom-2 right-4 flex items-center dark:shadow-none dark:ring-0" href="#example"><svg class="gb-icon inline-block size-3 transition-colors text-transparent group-hover/expandable:text-tint-subtle contrast-more:group-hover/expandable:text-tint-strong" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></summary><div class="px-10 pb-5 space-y-4"><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R1hkd9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">-- much more convenient way for big scripts
</span></span><span class="highlight-line"><span class="highlight-line-content">local script = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function script.OnUpdate()
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnUpdate")
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">return script</span></span></code></pre></div><p class="mx-auto w-full decoration-primary/6 max-w-3xl">or</p><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R3hkd9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">return {
</span></span><span class="highlight-line"><span class="highlight-line-content">    OnUpdate = function() 
</span></span><span class="highlight-line"><span class="highlight-line-content">        print("OnUpdate")
</span></span><span class="highlight-line"><span class="highlight-line-content">    end,
</span></span><span class="highlight-line"><span class="highlight-line-content">}</span></span></code></pre></div></div></details><hr class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 border-tint-subtle"/><h2 class="text-3xl font-semibold heading grid scroll-m-12 relative group/hash mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0" id="example-scripts"><div class="relative hash grid grid-area-1-1 h-[1em] border-0 opacity-0 group-hover/hash:opacity-[0] group-focus/hash:opacity-[0] md:group-hover/hash:md:opacity-[1] md:group-focus/hash:md:opacity-[1] -ml-6 mt-[1.05em]"><a aria-label="Direct link to heading" class="inline-flex h-full items-start leading-tight" href="#example-scripts"><svg class="gb-icon self-center transition-colors text-transparent group-hover/hash:text-tint-subtle contrast-more:group-hover/hash:text-tint-strong size-4" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></div><div class="grid-area-1-1 z-[1] justify-self-start text-left leading-tight mt-[1em]">Example Scripts</div></h2><p class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0">There is example scripts you can rely on:</p><details class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 group/expandable bg-tint-base border border-b-0 border-tint-subtle [&amp;]:mt-[0px] [&amp;:first-child]:mt-5 [&amp;:first-child]:rounded-t-lg [:not(&amp;)_+&amp;]:mt-5 [:not(&amp;)_+&amp;]:rounded-t-lg [&amp;:not(:has(+_&amp;))]:mb-5 [&amp;:not(:has(+_&amp;))]:rounded-b-lg [&amp;:not(:has(+_&amp;))]:border-b" id="debug-script" open=""><summary class="cursor-pointer px-4 pr-10 py-4 relative list-none select-none transition-colors text-tint group-hover/expandable:text-tint-strong group-open/expandable:text-tint-strong [&amp;::-webkit-details-marker]:hidden"><svg class="gb-icon inline-block size-3 mr-2 mb-1 transition-transform shrink-0 group-open/expandable:rotate-90" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/chevron-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg>Debug Script<a aria-label="Direct link to heading" class="absolute top-2 bottom-2 right-4 flex items-center dark:shadow-none dark:ring-0" href="#debug-script"><svg class="gb-icon inline-block size-3 transition-colors text-transparent group-hover/expandable:text-tint-subtle contrast-more:group-hover/expandable:text-tint-strong" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></summary><div class="px-10 pb-5 space-y-4"><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R1ikd9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">---@diagnostic disable: undefined-global, param-type-mismatch, inject-field
</span></span><span class="highlight-line"><span class="highlight-line-content">local debug = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local tab = Menu.Create("General", "Debug", "Debug", "Debug")
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local inworld_group = tab:Create("In-World")
</span></span><span class="highlight-line"><span class="highlight-line-content">local callbacks_group = tab:Create("Callbacks")
</span></span><span class="highlight-line"><span class="highlight-line-content">local inworld_settings_group = tab:Create("In-World Settings", 1)
</span></span><span class="highlight-line"><span class="highlight-line-content">local callbacks_settings_group = tab:Create("Callbacks Settings", 2)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region UI
</span></span><span class="highlight-line"><span class="highlight-line-content">local ui = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.global_switch = inworld_group:Switch("In-World Enabled", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.name = inworld_group:Switch("Unit Name", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.position = inworld_group:Switch("Unit Position", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.modifier = inworld_group:Switch("Modifiers", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.ability = inworld_group:Switch("Abilities", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.item = inworld_group:Switch("Items", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.modifier_state = inworld_group:Switch("Modifier State", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld.modifier_state_duration = inworld_group:Switch("Modifier State Duration", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld_settings = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld_settings.hero_only = inworld_settings_group:Switch("Only heroes", true)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.inworld_settings.on_draw = inworld_settings_group:Switch("Render in OnDraw \a{primary}fps drop", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.modifier = callbacks_group:Switch("Modifier", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.animation = callbacks_group:Switch("Animation", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.add_entity = callbacks_group:Switch("Entity Create/Remove", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.projectile = callbacks_group:Switch("Projectile", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.particle = callbacks_group:Switch("Particle", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.gesture = callbacks_group:Switch("Gesture", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.sound = callbacks_group:Switch("Sound", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks.order = callbacks_group:Switch("Unit Order", false)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks_settings = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks_settings.divider = callbacks_settings_group:Switch("Add 'divider' in the end of the log message", true)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.callbacks_settings.add_more_info = callbacks_settings_group:Switch("More info. Starts with [m] prefix", true)
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local font = Render.LoadFont("Arial", 0, 500)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local function add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.divider:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        print("+---+---+---+---+---+---+---+")
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">-- we can't modify the original table in callbacks, so we need to copy it to add more info
</span></span><span class="highlight-line"><span class="highlight-line-content">function table.copy(t)
</span></span><span class="highlight-line"><span class="highlight-line-content">    local u = { }
</span></span><span class="highlight-line"><span class="highlight-line-content">    for k, v in pairs(t) do u[k] = v end
</span></span><span class="highlight-line"><span class="highlight-line-content">    return u
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Callbacks
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Modifier
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnModifierCreate(ent, mod)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.modifier:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnModifierCreate")
</span></span><span class="highlight-line"><span class="highlight-line-content">    local modifier_name = Modifier.GetName(mod)
</span></span><span class="highlight-line"><span class="highlight-line-content">    local owner = Ability.GetOwner(Modifier.GetAbility(mod))
</span></span><span class="highlight-line"><span class="highlight-line-content">    local owner_name = NPC.GetUnitName(owner)
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(("%s | %s -&gt; %s"):format(modifier_name, owner_name, NPC.GetUnitName(ent)))
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnModifierDestroy(ent, mod)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.modifier:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnModifierDestroy")
</span></span><span class="highlight-line"><span class="highlight-line-content">    local modifier_name = Modifier.GetName(mod)
</span></span><span class="highlight-line"><span class="highlight-line-content">    local owner = Ability.GetOwner(Modifier.GetAbility(mod))
</span></span><span class="highlight-line"><span class="highlight-line-content">    local owner_name = NPC.GetUnitName(owner)
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(("%s | %s -&gt; %s"):format(modifier_name, owner_name, NPC.GetUnitName(ent)))
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Animation
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnUnitAnimation(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.animation:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnUnitAnimation")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if (ui.callbacks_settings.add_more_info:Get() and a.unit and Entity.IsNPC(a.unit)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">        a = table.copy(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">        local unit_name = NPC.GetUnitName(a.unit)
</span></span><span class="highlight-line"><span class="highlight-line-content">        a["[m]unit_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnUnitAnimationEnd(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">	if not ui.callbacks.animation:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnUnitAnimationEnd")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if (ui.callbacks_settings.add_more_info:Get() and a.unit and Entity.IsNPC(a.unit)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">        a = table.copy(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">        local unit_name = NPC.GetUnitName(a.unit)
</span></span><span class="highlight-line"><span class="highlight-line-content">        a["[m]unit_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region EntityCreate
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnEntityCreate(entity)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.add_entity:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print('OnEntityCreate')
</span></span><span class="highlight-line"><span class="highlight-line-content">    -- can't use NPC.GetUnitNameor Abilit.GetName because entity is not fully filled in the first tick
</span></span><span class="highlight-line"><span class="highlight-line-content">    local type = (function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">        if Entity.IsAbility(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Ability"
</span></span><span class="highlight-line"><span class="highlight-line-content">        elseif Entity.IsNPC(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "NPC"
</span></span><span class="highlight-line"><span class="highlight-line-content">        elseif Entity.IsPlayer(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Player"
</span></span><span class="highlight-line"><span class="highlight-line-content">        else
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Entity"
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end)()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(("%s | %s | %d"):format(type, Entity.GetClassName(entity), Entity.GetIndex(entity)))
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnEntityDestroy(entity)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.add_entity:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">	print('OnEntityDestroy')
</span></span><span class="highlight-line"><span class="highlight-line-content">    local type = (function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">        if Entity.IsAbility(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Ability"
</span></span><span class="highlight-line"><span class="highlight-line-content">        elseif Entity.IsNPC(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "NPC"
</span></span><span class="highlight-line"><span class="highlight-line-content">        elseif Entity.IsPlayer(entity) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Player"
</span></span><span class="highlight-line"><span class="highlight-line-content">        else
</span></span><span class="highlight-line"><span class="highlight-line-content">            return "Entity"
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end)()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(("%s | %s | %d"):format(type, Entity.GetClassName(entity), Entity.GetIndex(entity)))
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Projectile
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnProjectile(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    -- range autoatacks, target abilities
</span></span><span class="highlight-line"><span class="highlight-line-content">	if not ui.callbacks.projectile:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnProjectile")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        proj = table.copy(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (proj.source and Entity.IsNPC(proj.source)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(proj.source)
</span></span><span class="highlight-line"><span class="highlight-line-content">            proj["[m]unit_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (proj.target and Entity.IsNPC(proj.target)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(proj.target)
</span></span><span class="highlight-line"><span class="highlight-line-content">            proj["[m]target_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnLinearProjectileCreate(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    -- mirana's arrow
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.projectile:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnLinearProjectileCreate")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        proj = table.copy(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (proj.source and Entity.IsNPC(proj.source)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(proj.source)
</span></span><span class="highlight-line"><span class="highlight-line-content">            proj["[m]unit_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnProjectileLoc(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.projectile:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    -- tinker's rockets
</span></span><span class="highlight-line"><span class="highlight-line-content">	print("OnProjectileLoc")
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(proj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Particle
</span></span><span class="highlight-line"><span class="highlight-line-content">local particle_name_map = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnParticleCreate(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.particle:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">    
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnParticleCreate")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        prt = table.copy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (prt.entity and Entity.IsNPC(prt.entity)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(prt.entity)
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]entity_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (prt.entityForModifiers and Entity.IsNPC(prt.entityForModifiers)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(prt.entityForModifiers)
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]entityForModifiers_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        particle_name_map[prt.index] = prt.name
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnParticleUpdate(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.particle:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    -- wisp's tentacles spam
</span></span><span class="highlight-line"><span class="highlight-line-content">    if (prt.controlPoint == 2 and prt.position == Vector(1.0, 1.0, 1.0)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">		return
</span></span><span class="highlight-line"><span class="highlight-line-content">	end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnParticleUpdate")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        prt = table.copy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if particle_name_map[prt.index] then
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]name"] = particle_name_map[prt.index]
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnParticleUpdateEntity(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.particle:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnParticleUpdateEntity")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        prt = table.copy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (prt.entity and Entity.IsNPC(prt.entity)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(prt.entity)
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]entity_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        if particle_name_map[prt.index] then
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]name"] = particle_name_map[prt.index]
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnParticleUpdateFallback(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.particle:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnParticleUpdateFallback")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        prt = table.copy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if particle_name_map[prt.index] then
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]name"] = particle_name_map[prt.index]
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnParticleDestroy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.particle:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnParticleDestroy")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        prt = table.copy(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if particle_name_map[prt.index] then
</span></span><span class="highlight-line"><span class="highlight-line-content">            prt["[m]name"] = particle_name_map[prt.index]
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(prt)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    particle_name_map[prt.index] = nil
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Gesture
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnUnitAddGesture(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.gesture:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnUnitAddGesture")
</span></span><span class="highlight-line"><span class="highlight-line-content">	print(a)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Sound
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnStartSound(obj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.sound:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnStartSound")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        obj = table.copy(obj)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (obj.source and Entity.IsNPC(obj.source)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(obj.source)
</span></span><span class="highlight-line"><span class="highlight-line-content">            obj["[m]source_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">    print(obj)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Order
</span></span><span class="highlight-line"><span class="highlight-line-content">local flipped_order_enum = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">for i, v in pairs(Enum.UnitOrder) do
</span></span><span class="highlight-line"><span class="highlight-line-content">    flipped_order_enum[v] = i
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local flipped_issuer_enum = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">for i, v in pairs(Enum.PlayerOrderIssuer) do
</span></span><span class="highlight-line"><span class="highlight-line-content">    flipped_issuer_enum[v] = i
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnPrepareUnitOrders(order)
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.callbacks.order:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    print("OnPrepareUnitOrders")
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.callbacks_settings.add_more_info:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        order = table.copy(order)
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (order.npc and Entity.IsNPC(order.npc)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(order.npc)
</span></span><span class="highlight-line"><span class="highlight-line-content">            order["[m]npc_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (order.target and Entity.IsNPC(order.target)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local unit_name = NPC.GetUnitName(order.target)
</span></span><span class="highlight-line"><span class="highlight-line-content">            order["[m]target_name"] = unit_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (order.ability and Entity.IsAbility(order.ability)) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local ability_name = Ability.GetName(order.ability)
</span></span><span class="highlight-line"><span class="highlight-line-content">            order["[m]ability_name"] = ability_name
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        if (order.order) then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local order_name = flipped_order_enum[order.order]
</span></span><span class="highlight-line"><span class="highlight-line-content">            if order_name then
</span></span><span class="highlight-line"><span class="highlight-line-content">                order["[m]order_name"] = order_name
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">	print(order)
</span></span><span class="highlight-line"><span class="highlight-line-content">    add_divider()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local text_color &lt;const&gt; = Color(255, 255, 255, 255)
</span></span><span class="highlight-line"><span class="highlight-line-content">local font_size &lt;const&gt; = 14
</span></span><span class="highlight-line"><span class="highlight-line-content">local line_height &lt;const&gt; = 18
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local floor = math.floor
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local flipped_modstate_enum = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">for i, v in pairs(Enum.ModifierState) do
</span></span><span class="highlight-line"><span class="highlight-line-content">    flipped_modstate_enum[v] = i
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local function inworld_processing()
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.inworld.global_switch:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_names = ui.inworld.name:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_position = ui.inworld.position:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_modifiers = ui.inworld.modifier:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_abilities = ui.inworld.ability:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_items = ui.inworld.item:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_modifier_state = ui.inworld.modifier_state:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_modifier_state_duration = ui.inworld.modifier_state_duration:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local list = ui.inworld_settings.hero_only:Get() and Heroes.GetAll() or NPCs.GetAll()
</span></span><span class="highlight-line"><span class="highlight-line-content">    for i, unit in pairs(list) do
</span></span><span class="highlight-line"><span class="highlight-line-content">        if unit then
</span></span><span class="highlight-line"><span class="highlight-line-content">            local pos = Entity.GetAbsOrigin(unit)
</span></span><span class="highlight-line"><span class="highlight-line-content">            local screen_pos, is_visible = pos:ToScreen()
</span></span><span class="highlight-line"><span class="highlight-line-content">            if not is_visible then
</span></span><span class="highlight-line"><span class="highlight-line-content">                goto continue
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_names then
</span></span><span class="highlight-line"><span class="highlight-line-content">                local text = ("%s | %s | %d"):format(
</span></span><span class="highlight-line"><span class="highlight-line-content">                    Entity.GetClassName(unit),
</span></span><span class="highlight-line"><span class="highlight-line-content">                    Entity.GetClassName(unit),
</span></span><span class="highlight-line"><span class="highlight-line-content">                    Entity.GetIndex(unit)
</span></span><span class="highlight-line"><span class="highlight-line-content">                )
</span></span><span class="highlight-line"><span class="highlight-line-content">                Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_position then
</span></span><span class="highlight-line"><span class="highlight-line-content">                local text = ("%d, %d, %d"):format(
</span></span><span class="highlight-line"><span class="highlight-line-content">                    floor(pos.x),
</span></span><span class="highlight-line"><span class="highlight-line-content">                    floor(pos.y),
</span></span><span class="highlight-line"><span class="highlight-line-content">                    floor(pos.z)
</span></span><span class="highlight-line"><span class="highlight-line-content">                )
</span></span><span class="highlight-line"><span class="highlight-line-content">                Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_modifiers then
</span></span><span class="highlight-line"><span class="highlight-line-content">                local modifiers = NPC.GetModifiers(unit)
</span></span><span class="highlight-line"><span class="highlight-line-content">                if modifiers then
</span></span><span class="highlight-line"><span class="highlight-line-content">                    for _, mod in pairs(modifiers) do
</span></span><span class="highlight-line"><span class="highlight-line-content">                        local text = Modifier.GetName(mod)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    end
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_abilities then
</span></span><span class="highlight-line"><span class="highlight-line-content">                for i = 0, 25 do
</span></span><span class="highlight-line"><span class="highlight-line-content">                    local ab = NPC.GetAbilityByIndex(unit, i)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    if ab then
</span></span><span class="highlight-line"><span class="highlight-line-content">                        local text = ("%d: %s"):format(i, Ability.GetName(ab))
</span></span><span class="highlight-line"><span class="highlight-line-content">                        Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    end
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_items then
</span></span><span class="highlight-line"><span class="highlight-line-content">                for i = 0, 20 do
</span></span><span class="highlight-line"><span class="highlight-line-content">                    local item = NPC.GetItemByIndex(unit, i)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    if item then
</span></span><span class="highlight-line"><span class="highlight-line-content">                        local text = ("%d: %s"):format(i, Ability.GetName(item))
</span></span><span class="highlight-line"><span class="highlight-line-content">                        Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    end
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_modifier_state then
</span></span><span class="highlight-line"><span class="highlight-line-content">                for state_name, state_value in pairs(Enum.ModifierState) do
</span></span><span class="highlight-line"><span class="highlight-line-content">                    local has_state = NPC.HasState(unit, state_value)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    if (has_state) then
</span></span><span class="highlight-line"><span class="highlight-line-content">                        local text = state_name
</span></span><span class="highlight-line"><span class="highlight-line-content">                        Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">                    end
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">            if render_modifier_state_duration then
</span></span><span class="highlight-line"><span class="highlight-line-content">                local payload = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">                for i = 0, Enum.ModifierState.MODIFIER_STATE_LAST, 1 do
</span></span><span class="highlight-line"><span class="highlight-line-content">                    payload[i] = true
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">                local states = NPC.GetStatesDuration(unit, payload, false)
</span></span><span class="highlight-line"><span class="highlight-line-content">                for mod_state, duration in pairs(states) do
</span></span><span class="highlight-line"><span class="highlight-line-content">                    if (duration &gt; 0.0) then
</span></span><span class="highlight-line"><span class="highlight-line-content">                        local name = flipped_modstate_enum[mod_state]
</span></span><span class="highlight-line"><span class="highlight-line-content">                        if (name) then
</span></span><span class="highlight-line"><span class="highlight-line-content">                            local text = ("%s: %.2f"):format(name, duration)
</span></span><span class="highlight-line"><span class="highlight-line-content">                            Render.Text(font, font_size, text, screen_pos, text_color)
</span></span><span class="highlight-line"><span class="highlight-line-content">                            screen_pos = screen_pos + Vec2(0, line_height)
</span></span><span class="highlight-line"><span class="highlight-line-content">                        end
</span></span><span class="highlight-line"><span class="highlight-line-content">                    end
</span></span><span class="highlight-line"><span class="highlight-line-content">                end
</span></span><span class="highlight-line"><span class="highlight-line-content">            end
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">        ::continue::
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnDraw()
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.inworld_settings.on_draw:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        return
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    inworld_processing()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">function debug.OnUpdate()
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.inworld_settings.on_draw:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">        return
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    inworld_processing()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">return debug</span></span></code></pre></div></div></details><details class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 group/expandable bg-tint-base border border-b-0 border-tint-subtle [&amp;]:mt-[0px] [&amp;:first-child]:mt-5 [&amp;:first-child]:rounded-t-lg [:not(&amp;)_+&amp;]:mt-5 [:not(&amp;)_+&amp;]:rounded-t-lg [&amp;:not(:has(+_&amp;))]:mb-5 [&amp;:not(:has(+_&amp;))]:rounded-b-lg [&amp;:not(:has(+_&amp;))]:border-b" id="example-1" open=""><summary class="cursor-pointer px-4 pr-10 py-4 relative list-none select-none transition-colors text-tint group-hover/expandable:text-tint-strong group-open/expandable:text-tint-strong [&amp;::-webkit-details-marker]:hidden"><svg class="gb-icon inline-block size-3 mr-2 mb-1 transition-transform shrink-0 group-open/expandable:rotate-90" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/chevron-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg>Example<a aria-label="Direct link to heading" class="absolute top-2 bottom-2 right-4 flex items-center dark:shadow-none dark:ring-0" href="#example-1"><svg class="gb-icon inline-block size-3 transition-colors text-transparent group-hover/expandable:text-tint-subtle contrast-more:group-hover/expandable:text-tint-strong" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></summary><div class="px-10 pb-5 space-y-4"><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R1isd9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">local example = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region UI
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local tab = Menu.Create("General", "Main", "Example")
</span></span><span class="highlight-line"><span class="highlight-line-content">tab:Icon("\u{f6b6}")
</span></span><span class="highlight-line"><span class="highlight-line-content">local group = tab:Create("Main"):Create("Group")
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local ui = {}
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.global_switch = group:Switch("Global Switch", false, "\u{f00c}")
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.auto_phase = group:Switch("Auto Phase Boots", true, "panorama/images/items/phase_boots_png.vtex_c")
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.custom_radius = group:Slider("Custom Radius", 0, 1000, 0, function (value)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if value == 0 then return "Disabled" end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    return tostring(value)
</span></span><span class="highlight-line"><span class="highlight-line-content">end)
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.custom_radius:Icon("\u{f1ce}")
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.radius_color = group:ColorPicker("Radius Color", Color(255, 255, 255), "\u{f53f}")
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.vbe_render = group:Switch("VBE Render", false, "\u{f06e}")
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.particle_notif = group:Switch("Particle Notification", false, "\u{f0f3}")
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.global_switch:SetCallback(function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    ui.auto_phase:Disabled(not ui.global_switch:Get())
</span></span><span class="highlight-line"><span class="highlight-line-content">    ui.custom_radius:Disabled(not ui.global_switch:Get())
</span></span><span class="highlight-line"><span class="highlight-line-content">    ui.radius_color:Disabled(not ui.global_switch:Get())
</span></span><span class="highlight-line"><span class="highlight-line-content">    ui.vbe_render:Disabled(not ui.global_switch:Get())
</span></span><span class="highlight-line"><span class="highlight-line-content">    ui.particle_notif:Disabled(not ui.global_switch:Get())
</span></span><span class="highlight-line"><span class="highlight-line-content">end, true)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion UI
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Vars
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local my_hero = nil
</span></span><span class="highlight-line"><span class="highlight-line-content">local particle = nil
</span></span><span class="highlight-line"><span class="highlight-line-content">local need_update_particle = false
</span></span><span class="highlight-line"><span class="highlight-line-content">local need_update_color = false
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.custom_radius:SetCallback(function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    need_update_particle = true
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.global_switch:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        ui.radius_color:Disabled(ui.custom_radius:Get() == 0)
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">end, true)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">ui.radius_color:SetCallback(function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    need_update_color = true
</span></span><span class="highlight-line"><span class="highlight-line-content">end)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion Vars
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local auto_phase = function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.auto_phase:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local item = NPC.GetItem(my_hero, "item_phase_boots")
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not item then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not Ability.IsCastable(item, NPC.GetMana(my_hero)) then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not NPC.IsRunning(my_hero) then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    Ability.CastNoTarget(item)
</span></span><span class="highlight-line"><span class="highlight-line-content">    return true
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local custom_radius = function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if ui.custom_radius:Get() == 0 or need_update_particle or not Entity.IsAlive(my_hero) then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        Particle.Destroy(particle)
</span></span><span class="highlight-line"><span class="highlight-line-content">        particle = nil
</span></span><span class="highlight-line"><span class="highlight-line-content">        need_update_particle = false
</span></span><span class="highlight-line"><span class="highlight-line-content">        return
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not particle then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        particle = Particle.Create("particles/ui_mouseactions/drag_selected_ring.vpcf", Enum.ParticleAttachment.PATTACH_ABSORIGIN_FOLLOW, my_hero)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        Particle.SetControlPoint(particle, 2, Vector(ui.custom_radius:Get(), 255, 255))
</span></span><span class="highlight-line"><span class="highlight-line-content">        local color = ui.radius_color:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">        color = Vector(color.r, color.g, color.b)
</span></span><span class="highlight-line"><span class="highlight-line-content">        Particle.SetControlPoint(particle, 1, color)
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if particle and need_update_color then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        local color = ui.radius_color:Get()
</span></span><span class="highlight-line"><span class="highlight-line-content">        color = Vector(color.r, color.g, color.b)
</span></span><span class="highlight-line"><span class="highlight-line-content">        Particle.SetControlPoint(particle, 1, color)
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local font = Render.LoadFont("MuseoSansEx", Enum.FontCreate.FONTFLAG_ANTIALIAS)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">local vbe_render = function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.vbe_render:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local is_visible = NPC.IsVisibleToEnemies(my_hero)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not is_visible then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local pos = Entity.GetAbsOrigin(my_hero) + Vector(0, 0, NPC.GetHealthBarOffset(my_hero))
</span></span><span class="highlight-line"><span class="highlight-line-content">    local render_pos, pos_is_visible = Render.WorldToScreen(pos)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not pos_is_visible then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local x, y = render_pos.x, render_pos.y - 80
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    local text = "Visible"
</span></span><span class="highlight-line"><span class="highlight-line-content">    local text_size = Render.TextSize(font, 30, text)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    x = x - text_size.x / 2
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    Render.Text(font, 30, text, Vec2(x + 1, y + 1), Color(0, 0, 0))
</span></span><span class="highlight-line"><span class="highlight-line-content">    Render.Text(font, 30, text, Vec2(x, y), Color(255, 255, 255))
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#region Callbacks
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">example.OnParticleCreate = function (data)
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.global_switch:Get() or not ui.particle_notif:Get() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    --[[ data:
</span></span><span class="highlight-line"><span class="highlight-line-content">        {
</span></span><span class="highlight-line"><span class="highlight-line-content">          "index": "4",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "entity_id": "-1",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "fullName": "particles/units/heroes/hero_crystalmaiden/maiden_crystal_nova.vpcf",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "hash": "3519047136",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "particleNameIndex": "-2119646217882970990",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "name": "maiden_crystal_nova",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "attachType": "2",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "entityForModifiers": "&lt;userdata&gt;",
</span></span><span class="highlight-line"><span class="highlight-line-content">          "entity_for_modifiers_id": "214"
</span></span><span class="highlight-line"><span class="highlight-line-content">        }
</span></span><span class="highlight-line"><span class="highlight-line-content">    ]]
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if data.entityForModifiers then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        local str = '&lt;img class="HeroIcon" src="file://{images}/heroes/'..Entity.GetUnitName(data.entityForModifiers)..'.png"/&gt;'.." "..data.fullName
</span></span><span class="highlight-line"><span class="highlight-line-content">        Chat.Print("ConsoleChat", str) --chat
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        Notification ({ --side
</span></span><span class="highlight-line"><span class="highlight-line-content">            duration = 3,
</span></span><span class="highlight-line"><span class="highlight-line-content">            timer = 3,
</span></span><span class="highlight-line"><span class="highlight-line-content">            hero = Entity.GetUnitName(data.entityForModifiers),
</span></span><span class="highlight-line"><span class="highlight-line-content">            -- primary_text = "Sunstrike",
</span></span><span class="highlight-line"><span class="highlight-line-content">            -- primary_image = "panorama/images/spellicons/invoker_sun_strike_png.vtex_c",
</span></span><span class="highlight-line"><span class="highlight-line-content">            --secondary_image = "panorama/images/spellicons/invoker/magus_apex/invoker_sun_strike_png.vtex_c",
</span></span><span class="highlight-line"><span class="highlight-line-content">            secondary_text = data.fullName,
</span></span><span class="highlight-line"><span class="highlight-line-content">            -- active = false,
</span></span><span class="highlight-line"><span class="highlight-line-content">            position = Entity.GetAbsOrigin(data.entityForModifiers),
</span></span><span class="highlight-line"><span class="highlight-line-content">            --sound = "sounds/ui/yoink"
</span></span><span class="highlight-line"><span class="highlight-line-content">        })
</span></span><span class="highlight-line"><span class="highlight-line-content">    else
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        Chat.Print("ConsoleChat", data.fullName) --chat
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        Notification ({ --side
</span></span><span class="highlight-line"><span class="highlight-line-content">            duration = 3,
</span></span><span class="highlight-line"><span class="highlight-line-content">            timer = 3,
</span></span><span class="highlight-line"><span class="highlight-line-content">            --hero = Entity.GetUnitName(data.entityForModifiers),
</span></span><span class="highlight-line"><span class="highlight-line-content">            primary_text = "Particle Create",
</span></span><span class="highlight-line"><span class="highlight-line-content">            primary_image = "panorama/images/emoticons/dotakin_roshan_stars_png.vtex_c",
</span></span><span class="highlight-line"><span class="highlight-line-content">            secondary_image = "\u{2b}",
</span></span><span class="highlight-line"><span class="highlight-line-content">            secondary_text = data.fullName,
</span></span><span class="highlight-line"><span class="highlight-line-content">            -- active = false,
</span></span><span class="highlight-line"><span class="highlight-line-content">            --position = Entity.GetAbsOrigin(data.entityForModifiers),
</span></span><span class="highlight-line"><span class="highlight-line-content">            --sound = "sounds/ui/yoink"
</span></span><span class="highlight-line"><span class="highlight-line-content">        })
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">example.OnDraw = function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.global_switch:Get() or not my_hero then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    vbe_render()
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">example.OnUpdate = function ()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not ui.global_switch:Get() then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        if particle then
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">            Particle.Destroy(particle)
</span></span><span class="highlight-line"><span class="highlight-line-content">            particle = nil
</span></span><span class="highlight-line"><span class="highlight-line-content">        end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">        return
</span></span><span class="highlight-line"><span class="highlight-line-content">    end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if not my_hero then my_hero = Heroes.GetLocal(); return end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    custom_radius()
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">    if auto_phase() then return end
</span></span><span class="highlight-line"><span class="highlight-line-content">end
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">--#endregion Callbacks
</span></span><span class="highlight-line"><span class="highlight-line-content">
</span></span><span class="highlight-line"><span class="highlight-line-content">return example</span></span></code></pre></div></div></details><hr class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 border-tint-subtle"/><h2 class="text-3xl font-semibold heading grid scroll-m-12 relative group/hash mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0" id="debugging"><div class="relative hash grid grid-area-1-1 h-[1em] border-0 opacity-0 group-hover/hash:opacity-[0] group-focus/hash:opacity-[0] md:group-hover/hash:md:opacity-[1] md:group-focus/hash:md:opacity-[1] -ml-6 mt-[1.05em]"><a aria-label="Direct link to heading" class="inline-flex h-full items-start leading-tight" href="#debugging"><svg class="gb-icon self-center transition-colors text-transparent group-hover/hash:text-tint-subtle contrast-more:group-hover/hash:text-tint-strong size-4" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></div><div class="grid-area-1-1 z-[1] justify-self-start text-left leading-tight mt-[1em]">Debugging</div></h2><p class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0">You can use <code class="py-[1px] px-1.5 min-w-[1.625rem] justify-center items-center ring-1 ring-inset ring-tint bg-tint rounded text-[.875em] leading-[calc(max(1.20em,1.25rem))]">print</code> or <code class="py-[1px] px-1.5 min-w-[1.625rem] justify-center items-center ring-1 ring-inset ring-tint bg-tint rounded text-[.875em] leading-[calc(max(1.20em,1.25rem))]">log</code> function to print messages to the console and <code class="py-[1px] px-1.5 min-w-[1.625rem] justify-center items-center ring-1 ring-inset ring-tint bg-tint rounded text-[.875em] leading-[calc(max(1.20em,1.25rem))]">%cheat_dir%/debug.log</code> file.
This is useful for debugging your scripts.</p><div class="hint transition-colors rounded-md straight-corners:rounded-none overflow-hidden bg-info border-info theme-muted-tint:bg-info-solid/2 [html.sidebar-filled.theme-bold.tint_&amp;]:bg-info-solid/2 text-sm grid grid-cols-[auto_1fr] mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0"><div class="py-4 pl-4 text-info-subtle contrast-more:text-info"><svg class="gb-icon size-[1.2em] mt-px leading-normal" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/circle-info.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></div><div class="p-4 pl-3 empty:p-0 -row-end-1 -col-end-1 space-y-3 [&amp;_.hint]:border [&amp;_pre]:border [&amp;_pre]:border-neutral"><p class="mx-auto w-full decoration-primary/6 max-w-3xl text-neutral-strong [&amp;_.can-override-bg]:bg-neutral-active [&amp;_.can-override-text]:text-neutral-strong flip-heading-hash">This functions will automaticly stringify your tables</p></div></div><details class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0 group/expandable bg-tint-base border border-b-0 border-tint-subtle [&amp;]:mt-[0px] [&amp;:first-child]:mt-5 [&amp;:first-child]:rounded-t-lg [:not(&amp;)_+&amp;]:mt-5 [:not(&amp;)_+&amp;]:rounded-t-lg [&amp;:not(:has(+_&amp;))]:mb-5 [&amp;:not(:has(+_&amp;))]:rounded-b-lg [&amp;:not(:has(+_&amp;))]:border-b" id="example-2" open=""><summary class="cursor-pointer px-4 pr-10 py-4 relative list-none select-none transition-colors text-tint group-hover/expandable:text-tint-strong group-open/expandable:text-tint-strong [&amp;::-webkit-details-marker]:hidden"><svg class="gb-icon inline-block size-3 mr-2 mb-1 transition-transform shrink-0 group-open/expandable:rotate-90" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/chevron-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg>Example<a aria-label="Direct link to heading" class="absolute top-2 bottom-2 right-4 flex items-center dark:shadow-none dark:ring-0" href="#example-2"><svg class="gb-icon inline-block size-3 transition-colors text-transparent group-hover/expandable:text-tint-subtle contrast-more:group-hover/expandable:text-tint-strong" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></summary><div class="px-10 pb-5 space-y-4"><div aria-busy="false" class="group/codeblock grid grid-flow-col mx-auto w-full decoration-primary/6 max-w-3xl"><div class="flex items-center justify-start gap-2 text-sm [grid-area:1/1]"></div><button class="z-[2] mt-2 mr-2 self-start justify-self-end rounded-md bg-transparent p-1 text-tint text-xs leading-none opacity-0 ring-1 ring-tint backdrop-blur-md transition-opacity duration-75 [grid-area:2/1] hover:ring-tint-hover group-hover/codeblock:opacity-[1] print:hidden">Copy</button><pre class="hide-scroll relative overflow-auto border border-tint-subtle bg-tint-subtle theme-muted:bg-tint-base [grid-area:2/1] contrast-more:border-tint contrast-more:bg-tint-base [html.theme-bold.sidebar-filled_&amp;]:bg-tint-base rounded-md straight-corners:rounded-sm shadow-sm"><code class="inline-grid min-w-full grid-cols-[auto_1fr] p-2 [count-reset:line] print:whitespace-pre-wrap" id=":R1k4d9uucqfkvfa:"><span class="highlight-line"><span class="highlight-line-content">-- print all towers names and their positions
</span></span><span class="highlight-line"><span class="highlight-line-content">for _, tower in pairs(Towers.GetAll()) do
</span></span><span class="highlight-line"><span class="highlight-line-content">	print(NPC.GetUnitName(tower), Entity.GetAbsOrigin(tower))
</span></span><span class="highlight-line"><span class="highlight-line-content">end</span></span></code></pre></div></div></details><h2 class="text-3xl font-semibold heading grid scroll-m-12 relative group/hash mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0" id="useful-links"><div class="relative hash grid grid-area-1-1 h-[1em] border-0 opacity-0 group-hover/hash:opacity-[0] group-focus/hash:opacity-[0] md:group-hover/hash:md:opacity-[1] md:group-focus/hash:md:opacity-[1] -ml-6 mt-[1.05em]"><a aria-label="Direct link to heading" class="inline-flex h-full items-start leading-tight" href="#useful-links"><svg class="gb-icon self-center transition-colors text-transparent group-hover/hash:text-tint-subtle contrast-more:group-hover/hash:text-tint-strong size-4" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/hashtag.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></div><div class="grid-area-1-1 z-[1] justify-self-start text-left leading-tight mt-[1em]">Useful Links</div></h2><p class="mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0">Here are some useful links:</p><ul class="min-w-0 space-y-2 mx-auto w-full decoration-primary/6 max-w-3xl page-api-block:ml-0"><li class="leading-normal flex items-start"><div class="text-base leading-normal mr-1 flex min-h-[1lh] min-w-6 items-center justify-center text-tint"><div class="before:font-var before:content-[--pseudoBefore--content]" style="--pseudoBefore--content:'•';--font-family:Arial;font-size:min(1.5em, 24px);line-height:1"></div></div><div class="flex min-w-0 flex-1 flex-col space-y-2"><p class="w-full decoration-primary/6 max-w-3xl min-h-[1lh] flip-heading-hash [&amp;:is(h2)&gt;div]:mt-0 [&amp;:is(h3)&gt;div]:mt-0 [&amp;:is(h4)&gt;div]:mt-0 mx-0"><a class="underline decoration-[max(0.07em,1px)] underline-offset-2 links-accent:underline-offset-4 links-default:decoration-primary/6 links-default:text-primary-subtle links-default:hover:text-primary-strong links-default:contrast-more:text-primary links-default:contrast-more:hover:text-primary-strong links-accent:decoration-primary-subtle links-accent:hover:decoration-[3px] links-accent:hover:[text-decoration-skip-ink:none] transition-all duration-100" data-state="closed" href="https://www.lua.org/manual/5.4/">Lua 5.4 Manual<svg class="gb-icon ml-0.5 inline size-3 links-accent:text-tint-subtle" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/arrow-up-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></p></div></li><li class="leading-normal flex items-start"><div class="text-base leading-normal mr-1 flex min-h-[1lh] min-w-6 items-center justify-center text-tint"><div class="before:font-var before:content-[--pseudoBefore--content]" style="--pseudoBefore--content:'•';--font-family:Arial;font-size:min(1.5em, 24px);line-height:1"></div></div><div class="flex min-w-0 flex-1 flex-col space-y-2"><p class="w-full decoration-primary/6 max-w-3xl min-h-[1lh] flip-heading-hash [&amp;:is(h2)&gt;div]:mt-0 [&amp;:is(h3)&gt;div]:mt-0 [&amp;:is(h4)&gt;div]:mt-0 mx-0"><a class="underline decoration-[max(0.07em,1px)] underline-offset-2 links-accent:underline-offset-4 links-default:decoration-primary/6 links-default:text-primary-subtle links-default:hover:text-primary-strong links-default:contrast-more:text-primary links-default:contrast-more:hover:text-primary-strong links-accent:decoration-primary-subtle links-accent:hover:decoration-[3px] links-accent:hover:[text-decoration-skip-ink:none] transition-all duration-100" data-state="closed" href="https://marketplace.visualstudio.com/items?itemName=ILKA.umbrella-vscode">VS Code Umbrella Extention<svg class="gb-icon ml-0.5 inline size-3 links-accent:text-tint-subtle" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/arrow-up-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></p></div></li></ul></div><div class="flex flex-col md:flex-row mt-6 gap-2 max-w-3xl mx-auto page-api-block:ml-0 text-tint"><a class="group text-sm p-2.5 flex gap-4 flex-1 flex-row items-center pr-4 border border-tint-subtle rounded straight-corners:rounded-none hover:border-primary text-pretty md:p-4 md:text-base" href="/api-v2.0/cheats-types-and-callbacks/callbacks"><span class="flex flex-col flex-1"><span class="text-xs">Next</span><span class="text-tint-strong group-hover:text-primary line-clamp-2">Callbacks</span></span><svg class="gb-icon hidden size-4 text-tint-subtle contrast-more:text-tint-strong group-hover:text-primary md:block" style="mask-image:url(https://ka-p.fontawesome.com/releases/v6.6.0/svgs/regular/chevron-right.svg?v=2&amp;token=a463935e93);mask-repeat:no-repeat;mask-position:center"></svg></a></div><div class="mx-auto mt-6 page-api-block:ml-0 flex max-w-3xl flex-row flex-wrap items-center gap-4 text-tint contrast-more:text-tint-strong"><p class="mr-auto text-sm">Last updated <time data-visual-test="transparent" datetime="2025-04-17T23:44:42.083Z" title="4/17/2025, 11:44:42 PM">1 month ago</time></p></div></main>